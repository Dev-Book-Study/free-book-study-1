# ğŸ“˜ ì¸í…”ë¦¬ì œì´ í•™ìŠµ ìë£Œ ìš”ì•½

## ğŸ”— ì°¸ê³  ì‚¬í•­

- ì›ë³¸ ì°¸ê³  ë„ì„œëŠ” **2019ë…„ ë°œí–‰** â†’ ê¸°ìˆ  ìŠ¤íƒ êµ¬ë²„ì „ ê°€ëŠ¥ì„± ìˆìŒ
- ë”°ë¼ì„œ **ìµœì‹  ê°œë°œ í™˜ê²½(Java 21, Spring Boot 3.4)** ê¸°ì¤€ ë³‘í–‰ í•™ìŠµ ê²°ì •

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì½”ë“œ ê°œìš”

### âœ… TDD vs ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì°¨ì´ì 

| êµ¬ë¶„        | TDD (Test-Driven Development)         | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Test)      |
|-----------|---------------------------------------|-------------------------|
| **ëª©ì **    | ì„¤ê³„ ì¤‘ì‹¬ ê°œë°œ ë°©ì‹<br>í…ŒìŠ¤íŠ¸ ë¨¼ì € ì‘ì„± â†’ ì½”ë“œ ì‘ì„±      | ê¸°ëŠ¥ ê²€ì¦ ì¤‘ì‹¬<br>ì½”ë“œ ì‘ì„± í›„ í…ŒìŠ¤íŠ¸ |
| **ìˆœì„œ**    | 1. ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸<br>2. ì‹¤ì œ ì½”ë“œ ì‘ì„±<br>3. ë¦¬íŒ©í† ë§ | ì½”ë“œ ì‘ì„± â†’ í…ŒìŠ¤íŠ¸ ì¶”ê°€          |
| **ì£¼ë„ ë°©ì‹** | í…ŒìŠ¤íŠ¸ê°€ ì„¤ê³„ë¥¼ ì´ëˆë‹¤                          | ì½”ë“œê°€ í…ŒìŠ¤íŠ¸ë¥¼ ìœ ë„í•œë‹¤           |
| **ì¥ì **    | ë†’ì€ ì»¤ë²„ë¦¬ì§€, ì„¤ê³„ ê°œì„                         | ë¹ ë¥¸ ì˜¤ë¥˜ íƒì§€, ë””ë²„ê¹… ìš©ì´        |
| **ë‹¨ì **    | ì§„ì… ì¥ë²½ ì¡´ì¬, ì‹œê°„ ì†Œìš”                       | í…ŒìŠ¤íŠ¸ ëˆ„ë½, ì„¤ê³„ ë¯¸í¡ ê°€ëŠ¥ì„±       |

---

### ğŸš€ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ì¥ì 

- ğŸ›¡ **íšŒê·€ ë°©ì§€**: ê¸°ì¡´ ê¸°ëŠ¥ì„ ê¹¨ëœ¨ë¦¬ì§€ ì•Šë„ë¡ ìë™ ê²€ì¦
- ğŸ” **ë¦¬íŒ©í† ë§ ìš©ì´ì„±**: ë¦¬íŒ©í† ë§ í›„ ê¸°ëŠ¥ ìœ ì§€ ì—¬ë¶€ ê²€ì¦
- ğŸ“˜ **ë¬¸ì„œí™”**: í…ŒìŠ¤íŠ¸ ì½”ë“œ ìì²´ê°€ ë™ì‘ ë°©ì‹ ì„¤ëª…ì„œ
- â± **ìƒì‚°ì„± í–¥ìƒ**: ë¹ ë¥¸ í”¼ë“œë°± ë£¨í”„
- ğŸ”§ **ê°œë°œ ì‹ ë¢°ë„ í–¥ìƒ**: ì•ˆì‹¬í•˜ê³  ì½”ë“œ ìˆ˜ì • ê°€ëŠ¥

---

### ğŸ”„ ë ˆë“œ-ê·¸ë¦°-ë¦¬íŒ©í„° ì‚¬ì´í´

1. ğŸŸ¥ **Red**: ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„±
2. âœ… **Green**: ìµœì†Œí•œì˜ ì½”ë“œë¡œ í…ŒìŠ¤íŠ¸ í†µê³¼
3. ğŸ” **Refactor**: ì½”ë“œ ê°œì„ , í…ŒìŠ¤íŠ¸ ìœ ì§€

---

### ğŸ§° ìì£¼ ì‚¬ìš©í•˜ëŠ” í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬

#### ğŸ’¡ Java / JUnit ê¸°ë°˜

| ë¼ì´ë¸ŒëŸ¬ë¦¬                 | ì„¤ëª…                             |
|-----------------------|--------------------------------|
| **JUnit 5 (Jupiter)** | í‘œì¤€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬                |
| **AssertJ**           | Fluent ìŠ¤íƒ€ì¼ assertion ì§€ì›        |
| **Mockito**           | Mock ê°ì²´ ìƒì„±, í–‰ìœ„ ê²€ì¦ ë„êµ¬           |
| **Hamcrest**          | Matcher ê¸°ë°˜ ê²€ì¦ (ìµœê·¼ì—” AssertJ ì„ í˜¸) |

#### ğŸ›  Spring Boot í…ŒìŠ¤íŠ¸ ì–´ë…¸í…Œì´ì…˜

| ì–´ë…¸í…Œì´ì…˜ / ë„êµ¬         | ì„¤ëª…                           |
|--------------------|------------------------------|
| `@SpringBootTest`  | ì „ì²´ Spring Context ë¡œë”©, í†µí•© í…ŒìŠ¤íŠ¸ |
| `@WebMvcTest`      | Controller ê³„ì¸µ í…ŒìŠ¤íŠ¸            |
| `@DataJpaTest`     | JPA Repository í…ŒìŠ¤íŠ¸ ì „ìš©        |
| `@MockBean`        | Beanì„ Mockìœ¼ë¡œ ì£¼ì…              |
| `TestRestTemplate` | REST API í†µí•© í…ŒìŠ¤íŠ¸ìš©             |
| `@Transactional`   | í…ŒìŠ¤íŠ¸ í›„ DB ë¡¤ë°± ì²˜ë¦¬               |

---

## ğŸ§· í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ìœ í˜•

| ìœ í˜•               | ì„¤ëª…                                             |
|------------------|------------------------------------------------|
| âœ… **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**     | ë©”ì„œë“œ/í´ë˜ìŠ¤ ë‹¨ìœ„ ê²€ì¦, ì™¸ë¶€ ì˜ì¡´ ì—†ìŒ                        |
| ğŸ”— **í†µí•© í…ŒìŠ¤íŠ¸**    | ì—¬ëŸ¬ ê³„ì¸µ ì—°ë™ í…ŒìŠ¤íŠ¸, ì‹¤ì œ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©                       |
| ğŸ§ª **Mock í…ŒìŠ¤íŠ¸**  | ì™¸ë¶€ ì˜ì¡´ì„±ì„ ê°€ì§œ(Mock) ê°ì²´ë¡œ ëŒ€ì²´                        |
| ğŸ§© **ìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸**  | ê³„ì¸µë³„ ìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸ (`@WebMvcTest`, `@DataJpaTest` ë“±) |
| ğŸŒ **E2E í…ŒìŠ¤íŠ¸**   | ì „ì²´ ì‹œìŠ¤í…œ íë¦„ì„ ì‚¬ìš©ì ì‹œì ìœ¼ë¡œ ê²€ì¦                         |
| ğŸ” **íšŒê·€ í…ŒìŠ¤íŠ¸**    | ê¸°ì¡´ ê¸°ëŠ¥ì´ ë¦¬íŒ©í† ë§ í›„ì—ë„ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ ê²€ì¦                    |
| âš¡ **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**     | ì²˜ë¦¬ëŸ‰, ì†ë„, ë¶€í•˜ ë“±ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ (JMH, JMeter ë“± í™œìš©)       |
| ğŸš¨ **ì˜ˆì™¸/ê²½ê³„ í…ŒìŠ¤íŠ¸** | null, ë¹ˆ ê°’, ìµœëŒ€/ìµœì†Œ ë“± ì—£ì§€ ì¼€ì´ìŠ¤ ê²€ì¦                   |

---

## ğŸ§± í”„ë¡œì íŠ¸ ê³„ì¸µë³„ ì í•© í…ŒìŠ¤íŠ¸ ì „ëµ

| ê³„ì¸µ                | í…ŒìŠ¤íŠ¸ ìœ í˜•                    | ì„¤ëª…                  |
|-------------------|---------------------------|---------------------|
| `config/util`     | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸                    | ìœ í‹¸ ë©”ì„œë“œ, ì„¤ì • ë¡œì§ ê²€ì¦    |
| `constants/enums` | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸                    | Enum ê°’ ë§¤í•‘, ìƒìˆ˜ê°’ ê²€ì¦   |
| `dto`             | Validation í…ŒìŠ¤íŠ¸            | ìœ íš¨ì„± ê²€ì‚¬, í•„ë“œ ì˜ˆì™¸ ì²˜ë¦¬    |
| `repository`      | `@DataJpaTest`, í†µí•© í…ŒìŠ¤íŠ¸    | CRUD, ì¿¼ë¦¬ ì¡°ê±´ ê²€ì¦      |
| `service`         | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ + Mockito          | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ì˜ˆì™¸ ì²˜ë¦¬      |
| `controller`      | `@WebMvcTest` + `MockMvc` | API ìš”ì²­/ì‘ë‹µ, ìƒíƒœ ì½”ë“œ ê²€ì¦ |
| `ui`              | `MockMvc`, E2E í…ŒìŠ¤íŠ¸        | ë·° ë Œë”ë§, ëª¨ë¸ ê°’ ê²€ì¦      |

---

## âœï¸ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‹¤ìŠµ ì˜ˆì‹œ

### âœ” ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

```java

class PersonalInfoMaskerTest {

    @DisplayName("ì´ë¦„ ë§ˆìŠ¤í‚¹")
    @ParameterizedTest(name = "{0}ì„ ë§ˆìŠ¤í‚¹í•˜ë©´ {1}ì´ ëœë‹¤")
    @CsvSource({
            "ë…ë…ê³ ì˜ì¬, ë…***ì¬",
            "ë…ê³ ì˜ì¬, ë…**ì¬",
            "ê¹€í¬ì—´, ê¹€*ì—´",
            "ê°•í˜, ê°•*",
            "ê°•, ê°•"
    })
    void maskName(String input, String expected) {
        assertThat(PersonalInfoMasker.maskName(input)).isEqualTo(expected);
    }

    @Test
    @DisplayName("null ë˜ëŠ” ë¹ˆ ë¬¸ìì—´ ì…ë ¥ ì‹œ ê·¸ëŒ€ë¡œ ë°˜í™˜")
    void maskNameWithNullOrEmpty() {
        assertThat(PersonalInfoMasker.maskName(null)).isNull();
        assertThat(PersonalInfoMasker.maskName("")).isEmpty();
    }

    @DisplayName("ì•„ì´ë”” ë§ˆìŠ¤í‚¹")
    @ParameterizedTest(name = "{0}ì„ ë§ˆìŠ¤í‚¹í•˜ë©´ {1}ì´ ëœë‹¤")
    @CsvSource({
            "test, tes*",
            "abcdef, abc***",
            "user123, use****",
            "john@example.com, joh*@example.com",
            "ab, **",
            "a@b.com, *@b.com"
    })
    void maskId(String input, String expected) {
        assertThat(PersonalInfoMasker.maskId(input)).isEqualTo(expected);
    }

    @DisplayName("ì´ë©”ì¼ ë§ˆìŠ¤í‚¹")
    @ParameterizedTest(name = "{0}ì„ ë§ˆìŠ¤í‚¹í•˜ë©´ {1}ì´ ëœë‹¤")
    @CsvSource({
            "test@naver.com, tes*@naver.com",
            "abcdef@gmail.com, abc***@gmail.com",
            "ab@naver.com, **@naver.com",
            "user123@example.com, use****@example.com",
            "a@b.com, *@b.com"
    })
    void maskEmail(String input, String expected) {
        assertThat(PersonalInfoMasker.maskEmail(Email.of(input))).isEqualTo(expected);
    }

    @DisplayName("ì „í™”ë²ˆí˜¸ ë§ˆìŠ¤í‚¹")
    @ParameterizedTest(name = "{0}ì„ ë§ˆìŠ¤í‚¹í•˜ë©´ {1}ì´ ëœë‹¤")
    @CsvSource({
            "02-1234-5678, 02****5678",
            "02-123-5678, 02***5678",
            "043-123-5678, 043***5678",
            "010-9876-5432, 010****5432",
            "+82 010-9876-5432, +82 010****5432",
            "01012345678, 010****5678",
            "+82 1012345678, +82 10****5678",
            "0212345678, 02****5678",
            "021234567, 02***4567",
            "05412345678, 054****5678",
            "0541234567, 054***4567"
    })
    void maskPhoneNumber(String input, String expected) {
        assertThat(PersonalInfoMasker.maskCell(Cell.of(input))).isEqualTo(expected);
    }
}
```

### Mock í…ŒìŠ¤íŠ¸

```java
class ResumeEtcHistoryModifierTest extends ResumeTestBase {
    @InjectMocks
    private ResumeEtcHistoryModifier resumeEtcHistoryModifier;

    @DisplayName("êµìœ¡ì´ë ¥ ë°ì´í„°ê°€ ìœ íš¨ì„±ì´ ëª¨ë‘ ë§ì„ ê²½ìš° ì´ìŠˆ ì—†ì´ ëª¨ë‘ ì €ì¥ë¨")
    @ParameterizedTest
    @CsvSource(value = {
            "'2022-03-01', '2022-12-01', false, 'ëŒ€ì™¸í™œë™', 'êµë‚´ í”„ë¡œê·¸ë˜ë° ë™ì•„ë¦¬ ì”¨ë¶€ì—‰ ìš´ì˜ì§„', 'ì”¨ë¶€ì—‰', '26ëª…ì˜ ë°±ì—”ë“œ ê°œë°œìê°€ ì°¸ì—¬í•œ í”„ë¡œì íŠ¸ì˜ ë°±ì—”ë“œ ë¦¬ë”ë¡œì„œ ê°ì²´ì§€í–¥ì ì´ë©° í´ë¦°í•œ ì½”ë“œì˜ ì¤‘ìš”ì„±ì„ ë°°ì› ìŠµë‹ˆë‹¤.'",
            "'2022-03-01', , false, 'ìê²©ì¦', 'ì •ë³´ì²˜ë¦¬ê¸°ì‚¬', 'í•œêµ­ì‚°ì—…ì…ë ¥ê³µë‹¨', ''",
            " , '2022-12-01', false, 'ìˆ˜ìƒì´ë ¥', 'í•œì´ìŒ ICT ë©˜í† ë§ ê³µëª¨ì „', 'í•œêµ­ì •ë³´ì‚°ì—…ì—°í•©íšŒ', 'í•œêµ­ì •ë³´ì‚°ì—…ì—°í•©íšŒì¥ìƒ(ì…ì„ )'",
    })
    void resume_EtcHistory_Update_Suc_All(LocalDate startTime, LocalDate endTime, Boolean inProgress,
                                          String etcType, String etcName, String etcOrganization, String etcInfo) throws Exception {
        // Arrange
        Resume resume = createResume();

        // Act
        List<ResumeEtcHistoryCommand> commands = List.of(ResumeCommandBuilder.buildEtcHistory(startTime, endTime, inProgress, etcType, etcName, etcOrganization, etcInfo));
        resumeEtcHistoryModifier.modify(resume, commands, DeviceEnvironment.WEB);

        // Assert
        assertThat(resume.getEtcHistories()).hasSameSizeAs(commands);
        resume.getEtcHistories()
                .forEach(etcHistory -> {
                    assertThat(etcHistory.getStartedAt()).isEqualTo(startTime);
                    assertThat(etcHistory.getFinishedAt()).isEqualTo(endTime);
                    assertThat(etcHistory.getInProgress()).isEqualTo(inProgress);
                    assertThat(etcHistory.getEtcType()).isEqualTo(etcType);
                    assertThat(etcHistory.getEtcName()).isEqualTo(etcName);
                    assertThat(etcHistory.getEtcOrganization()).isEqualTo(etcOrganization);
                    assertThat(etcHistory.getEtcInfo()).isEqualTo(etcInfo);
                });
    }

    @DisplayName("ê¸°íƒ€ì´ë ¥ ë°ì´í„°ì˜ ê¸°ê°„ì´ ë°˜ëŒ€ë¡œ ë˜ì–´ìˆìœ¼ë©´ ê¸°ê°„ ì „ë¶€ ì €ì¥ë˜ì§€ ì•ŠìŒ")
    @ParameterizedTest
    @CsvSource(value = {"'2012-01-02', '2011-03-01'"})
    void resume_EtcHistory_Update_Suc_Part_Date(LocalDate startTime, LocalDate endTime) throws Exception {
        // Arrange
        Resume resume = createResume();

        // Act
        List<ResumeEtcHistoryCommand> commands = List.of(ResumeCommandBuilder.buildEtcHistory(startTime, endTime, false, "", "TestEtc", "", ""));
        resumeEtcHistoryModifier.modify(resume, commands, DeviceEnvironment.WEB);

        // Assert
        assertThat(resume.getEtcHistories()).hasSameSizeAs(commands);
        resume.getEtcHistories()
                .forEach(etcHistory -> {
                    assertThat(etcHistory.getStartedAt()).isNull();
                    assertThat(etcHistory.getFinishedAt()).isNull();
                    assertThat(etcHistory.getInProgress()).isFalse();
                    assertThat(etcHistory.getEtcType()).isEmpty();
                    assertThat(etcHistory.getEtcName()).isEqualTo("TestEtc");
                    assertThat(etcHistory.getEtcOrganization()).isEmpty();
                    assertThat(etcHistory.getEtcInfo()).isEmpty();
                });
    }

    @DisplayName("ê¸°íƒ€ì´ë ¥ ë°ì´í„°ê°€ ì—†ê±°ë‚˜ ëª¨ë‘ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ ì €ì¥í•˜ì§€ ì•ŠìŒ")
    @ParameterizedTest
    @CsvSource(value = {
            " , , false, '', '', '', ''",
            "'2022-03-01', '2021-12-01', false, '', '', '', ''",
    })
    void resume_EtcHistory_Update_Fail(LocalDate startTime, LocalDate endTime, Boolean inProgress,
                                       String etcType, String etcName, String etcOrganization, String etcInfo) throws Exception {
        // Arrange
        Resume resume = createResume();

        // Act
        List<ResumeEtcHistoryCommand> commands = List.of(ResumeCommandBuilder.buildEtcHistory(startTime, endTime, inProgress, etcType, etcName, etcOrganization, etcInfo));
        resumeEtcHistoryModifier.modify(resume, commands, DeviceEnvironment.WEB);

        // Assert
        assertThat(resume.getEtcHistories()).isEmpty();
    }
}

```